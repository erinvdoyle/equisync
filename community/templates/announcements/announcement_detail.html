{% extends "base.html" %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'community/css/community.css' %}">
{% endblock %}

{% block content %}
<div class="container announcement-detail-container">
    <h1 class="announcement-title">{{ announcement.title }}</h1>
    <p><strong>Description:</strong> {{ announcement.description }}</p>
    <p><strong>Posted Date:</strong> {{ announcement.date_posted }}</p>

    <h2>Comments</h2>
    {% for comment in comments %}
        <div class="comment-box">
            <p>{{ comment.text }}</p>
            <small>Posted by: <a href="mailto:{{ comment.user.email }}">{{ comment.user.username }}</a> 
            at {{ comment.created_at|date:"M. d, Y, g:i a" }}</small>

            {% if comment.user == request.user %}
                <div class="comment-actions">
                    <a href="{% url 'community:edit_comment' comment_id=comment.id %}" class="btn btn-sm btn-secondary">Edit</a>
                    <a href="{% url 'community:delete_comment' comment_id=comment.id %}" class="btn btn-sm btn-danger">Delete</a>
                </div>
            {% endif %}
        </div>
    {% empty %}
        <p>No comments yet. Be the first to comment!</p>
    {% endfor %}

    <div class="add-comment-section">
        <h3>Add a Comment</h3>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary">Add Comment</button>
        </form>
    </div>

    <div class="form-buttons">
        <a href="{% url 'community:community_overview' %}" class="btn btn-secondary">Back to Community</a>
    </div>
</div>
{% endblock %}

