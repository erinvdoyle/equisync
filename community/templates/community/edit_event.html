{% extends "base.html" %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'community/css/community.css' %}">
{% endblock %}

{% block content %}
<div class="container event-form-container">
    <h1 class="event-form-title">Edit an Event</h1>

    {% if user_events %}
        <p>Select an event you wish to edit:</p>

        <form method="post" class="event-form">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="event_id">Your Events:</label>
                <select name="event_id" id="event_id" class="form-control" onchange="this.form.submit()">
                    <option value="" disabled selected>-- Select Event --</option>
                    {% for event in user_events %}
                        <option value="{{ event.id }}">{{ event.title }} - {{ event.date }}</option>
                    {% endfor %}
                </select>
            </div>
        </form>

        {% if form %}
            <form method="post" class="event-form mt-4">
                {% csrf_token %}
                {{ form.as_p }}
                
                <div class="form-buttons">
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                    
                    <!-- Delete Event Button -->
                    <a href="{% url 'community:delete_event' %}?event_id={{ form.instance.id }}" class="btn btn-danger">Delete Event</a>

                    <a href="{% url 'community:community_overview' %}" class="btn btn-secondary">Cancel</a>
                </div>
            </form>
        {% endif %}

    {% else %}
        <p>You have no events to edit.</p>
    {% endif %}
</div>
{% endblock %}
