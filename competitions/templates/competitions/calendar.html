{% extends "base.html" %}
{% load calendar_tags %}
{% load static %}

{% block content %}
<h2>Upcoming Competitions</h2>
<span>Click an event for details. Suggest an event (subject to approval) with the Add button</span>

{% if view_type == 'month' %}
<h3 style="display: flex; justify-content: space-between; align-items: center;">
    <span></span>
    <div class="events-calendar" style="display: flex; align-items: center;">
        <a href="{% url 'competitions:month_view' year=prev_year month=prev_month %}" style="font-size: smaller;">&lt;</a>
        {% if user.is_authenticated %}
            <a href="{% url 'competitions:add_event' %}" style="font-size: smaller;">Add event</a>
        {% endif %}
        {% if user_has_events %}
            <a href="{% url 'competitions:edit_event' event_id=user_event.id %}" style="font-size: smaller;">Edit event</a>
        {% endif %}
        <form method="get" action="{% url 'competitions:month_view' year=year month=month %}" class="search-form" style="display: inline;">
            <input type="text" name="search" placeholder="Search" style="width: 50px; font-size: smaller;">
            <button type="submit" style="font-size: smaller;">
                <i class="fas fa-search"></i>
            </button>
        </form>
        <a href="{% url 'competitions:month_view' year=next_year month=next_month %}" style="font-size: smaller;">&gt;</a>
    </div>
</h3>
<div class="custom-calendar-container">
    {% month_calendar year month events as calendar_html %}
    {{ calendar_html|safe }}
</div>
{% elif view_type == 'week' %}
<h3>Week View: {{ month }}/{{ day }}/{{ year }}</h3>
<ul>
    {% for event in events %}
        <li><a href="{{ event.get_absolute_url }}">{{ event.title }}</a></li>
    {% endfor %}
</ul>
{% elif view_type == 'day' %}
<h3>Day View: {{ month }}/{{ day }}/{{ year }}</h3>
<ul>
    {% for event in events %}
        <li><a href="{{ event.get_absolute_url }}">{{ event.title }}</a></li>
    {% endfor %}
</ul>
{% endif %}

{% endblock %}
